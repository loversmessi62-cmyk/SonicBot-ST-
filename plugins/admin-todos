import config from "../config.js";

export default {
    commands: ["todos", "tagall", "invocar"],

    run: async (sock, msg, args, { isGroup }) => {

        if (!isGroup)
            return sock.sendMessage(msg.key.remoteJid, { text: config.messages.group });

        const jid = msg.key.remoteJid;

        const metadata = await sock.groupMetadata(jid);
        const participantes = metadata.participants;

        let texto = args.join(" ") || "ğŸ“¢ *AtenciÃ³n a todos!*";

        let mensaje = `${texto}\n\n`;
        let menciones = [];

        for (let user of participantes) {
            mensaje += `â¤ @${user.id.split("@")[0]}\n`;
            menciones.push(user.id);
        }

        await sock.sendMessage(jid, { text: mensaje, mentions: menciones });
    }
};
