import config from "../config.js";

export default {
    commands: ["todos", "tagall", "invocar"],

    run: async (sock, m, args, { isGroup, isAdmin, metadata }) => {

        if (!isGroup)
            return sock.sendMessage(m.key.remoteJid, { text: config.messages.group }, { quoted: m });

        if (!isAdmin)
            return sock.sendMessage(m.key.remoteJid, { text: config.messages.admin }, { quoted: m });

        const participantes = metadata.participants;
        const menciones = participantes.map(u => u.id);

        let texto = args.join(" ") || "ðŸ“¢ *AtenciÃ³n a todos!*";
        let lista = "";

        for (let p of participantes)
            lista += `@${p.id.split("@")[0]}\n`;

        await sock.sendMessage(m.key.remoteJid, {
            text: `${texto}\n\n${lista}`,
            mentions: menciones
        });
    }
};
